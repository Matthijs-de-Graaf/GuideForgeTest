# Development image gebaseerd op Maven met Java 21
FROM maven:3.9.6-eclipse-temurin-21
WORKDIR /app

# Kopieer Maven config en dependencies eerst voor caching
COPY pom.xml .
COPY .mvn .mvn
COPY mvnw .
RUN mvn dependency:go-offline

# Kopieer broncode (wordt overschreven door bind mount in compose)
COPY src ./src

# Start Spring Boot in dev mode
CMD ["./mvnw", "spring-boot:run", "-Dspring-boot.run.fork=false"]
EXPOSE 8080